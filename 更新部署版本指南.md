# 更新已发布的版本 - 完整指南

## 方法一：通过 Git 推送自动部署（推荐）✨

如果你的 Vercel 项目已连接到 GitHub，这是最简单的方式：

### 步骤 1：提交所有更改

```bash
# 查看有哪些文件被修改了
git status

# 添加所有更改的文件
git add .

# 提交更改（写上你的更新说明）
git commit -m "更新：修复作品详情页网络问题，优化 HOME 标题样式"

# 推送到 GitHub
git push origin main
```

### 步骤 2：等待自动部署

- ✅ Vercel 会自动检测到新的推送
- ✅ 自动开始构建和部署
- ✅ 通常 2-5 分钟完成
- ✅ 部署完成后会更新你的网站

### 步骤 3：查看部署状态

1. 访问 Vercel 控制台：https://vercel.com
2. 进入你的项目
3. 点击 **"Deployments"** 标签
4. 查看最新的部署状态（绿色 ✓ 表示成功）

---

## 方法二：在 Vercel 控制台手动重新部署

如果你想手动触发重新部署（不推送代码）：

### 步骤 1：登录 Vercel

访问 https://vercel.com 并登录

### 步骤 2：进入项目

1. 点击你的项目名称
2. 进入项目页面

### 步骤 3：重新部署

1. 点击 **"Deployments"** 标签
2. 找到你想要重新部署的版本（通常是最新的）
3. 点击右侧的 **"..."** 菜单
4. 选择 **"Redeploy"**
5. 确认重新部署

---

## 方法三：本地先测试，再推送

如果你想先确认代码没问题再推送：

### 步骤 1：本地测试

```bash
# 确保本地服务器在运行
npm run dev

# 在浏览器中测试所有功能
# - 检查首页是否正常
# - 检查作品详情页是否能正常加载
# - 检查所有交互是否正常
```

### 步骤 2：构建测试（可选）

```bash
# 运行构建命令，检查是否有错误
npm run build

# 如果构建成功，运行生产模式测试
npm start
```

### 步骤 3：推送代码

确认无误后，按照方法一的步骤推送代码。

---

## 当前更改说明

根据你刚才的修改，本次更新包括：

1. ✅ **修复作品详情页网络问题**
   - 为 `/api/notion` 路由添加代理支持
   - 添加重试机制处理网络错误
   - 优化错误提示信息

2. ✅ **优化 HOME 标题样式**
   - HOME 标题不再随机分布（保持静态）
   - HOME 标题不受鼠标影响（移除 hover 效果）
   - HOME 标题字体更粗（font-weight: 500）

3. ✅ **其他优化**
   - 添加错误页面的重试按钮
   - 改进错误处理和用户体验

---

## 快速更新命令（复制粘贴）

如果你想快速更新，可以复制以下命令：

```bash
# 1. 进入项目目录（如果不在）
cd g:\notion

# 2. 查看更改
git status

# 3. 添加所有更改
git add .

# 4. 提交更改
git commit -m "更新：修复作品详情页网络问题，优化 HOME 标题样式"

# 5. 推送到 GitHub（Vercel 会自动部署）
git push origin main
```

---

## 部署后检查清单

部署完成后，请检查：

- [ ] 网站可以正常访问
- [ ] HOME 标题显示正常（静态，不随机分布）
- [ ] 作品列表可以正常显示
- [ ] 点击作品可以正常进入详情页
- [ ] 作品详情页内容可以正常加载
- [ ] 错误页面有重试按钮
- [ ] 所有样式都正常

---

## 常见问题

### Q: 推送后多久会更新？

A: 通常 2-5 分钟。你可以在 Vercel 控制台的 Deployments 标签查看实时进度。

### Q: 如何回退到之前的版本？

A: 
1. 在 Vercel 控制台进入 Deployments
2. 找到之前的版本
3. 点击右侧 "..." → "Promote to Production"

### Q: 部署失败怎么办？

A:
1. 查看 Vercel 部署日志中的错误信息
2. 检查环境变量是否正确配置
3. 确认代码没有语法错误（运行 `npm run build` 测试）

### Q: 需要更新环境变量吗？

A: 
- 如果只是代码更改，通常不需要
- 如果添加了新的环境变量，需要在 Vercel 的 Settings → Environment Variables 中添加

---

## 需要帮助？

如果遇到问题，告诉我具体的错误信息，我会帮你解决！


