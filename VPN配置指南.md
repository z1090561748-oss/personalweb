# VPN 配置指南

## 问题诊断

测试结果显示：
- ✅ 可以打开 Notion 网站（浏览器）
- ❌ 无法访问 Notion API（Node.js）

**原因：** VPN 可能只代理了浏览器流量，没有代理 Node.js 的请求。

## 解决方案

### 方案 1：配置系统代理（推荐）

1. **打开 Windows 设置**
   - 按 `Win + I` 打开设置
   - 进入 "网络和 Internet" > "代理"

2. **获取 VPN 代理地址**
   - 查看你的 VPN 软件设置
   - 找到本地代理端口（通常是 `127.0.0.1:端口号`）
   - 常见端口：1080, 7890, 10809 等

3. **配置系统代理**
   - 在 "手动代理设置" 中：
     - 打开 "使用代理服务器"
     - 地址：`127.0.0.1`
     - 端口：你的 VPN 端口（如 `7890`）
     - 保存

4. **重启开发服务器**
   ```bash
   # 停止当前服务器（Ctrl+C）
   npm run dev
   ```

### 方案 2：配置环境变量

如果知道 VPN 的代理地址，可以在 `.env.local` 中添加：

```env
HTTPS_PROXY=http://127.0.0.1:7890
HTTP_PROXY=http://127.0.0.1:7890
```

然后重启服务器。

### 方案 3：检查 VPN 设置

1. **检查 VPN 模式**
   - 确保 VPN 使用"全局代理"或"系统代理"模式
   - 不要使用"仅浏览器代理"模式

2. **检查 VPN 连接**
   - 确认 VPN 已连接
   - 尝试访问 Google 测试 VPN 是否工作

3. **重启 VPN**
   - 断开并重新连接 VPN
   - 确保连接稳定

## 验证

配置完成后，运行测试：

```bash
node test-network.js
```

如果 Notion API 可以访问，说明配置成功。

## 常见 VPN 代理端口

- Clash: `7890` (HTTP), `7891` (SOCKS5)
- V2Ray: `10808` (SOCKS5), `10809` (HTTP)
- Shadowsocks: `1080` (SOCKS5)
- 其他: 查看 VPN 软件设置

## 注意事项

- 配置系统代理后，所有网络请求都会通过代理
- 如果不需要代理时，记得关闭系统代理设置
- 某些 VPN 软件会自动配置系统代理，检查 VPN 软件设置


